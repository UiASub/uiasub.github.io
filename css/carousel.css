/* GLOBAL STYLES
/* GLOBAL STYLES
-------------------------------------------------- */
/* NOTE: page color/background is defined in custom.css. Avoid overriding here to prevent theme conflicts. */

/* Backwards-compatibility: many older styles target Bootstrap 3's `.item` selector.
   Add aliases so rules also apply to Bootstrap 5's `.carousel-item`. This prevents
   duplicated/conflicting declarations across CSS files. */
.carousel-item {
  /* ensure consistent box-sizing for carousel items */
  box-sizing: border-box;
}
body {
  color: #5a5a5a;
}


/* CUSTOMIZE THE NAVBAR
-------------------------------------------------- */

/* Special class on .container surrounding .navbar, used for positioning it into place. */
.navbar-wrapper {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  z-index: 20;
}

/* Flip around the padding for proper display in narrow viewports */
.navbar-wrapper > .container {
  padding-right: 0;
  padding-left: 0;
}
.navbar-wrapper .navbar {
  padding-right: 15px;
  padding-left: 15px;
}
.navbar-wrapper .navbar .container {
  width: auto;
}


/* CUSTOMIZE THE CAROUSEL
-------------------------------------------------- */

/* Carousel base class */
.carousel {
  height: 520px;
  margin-bottom: 0px;
  position: relative;
}
/* Since positioning the image, we need to help out the caption */
/* The cleaned .carousel-caption rules appear later in the file (Bootstrap 5 friendly) */

/* Custom grid layout for carousel content */
.carousel-caption .carousel-text {
  grid-column: 1 !important;
  max-width: 500px !important;
  margin: 0 !important;
}

.carousel-caption .carousel-image-container {
  grid-column: 2 !important;
  justify-self: end !important;
  margin: 0 !important;
  transform: translateX(40px) !important;
}

/* Override any Bootstrap column styles in carousel */
.carousel-caption .col-md-4,
.carousel-caption .col-md-8 {
  position: static !important;
  float: none !important;
  padding-left: 0 !important;
  padding-right: 0 !important;
}

/* Declare heights because of positioning of img element */
.carousel-item {
  height: 520px; /* fixed visual height for carousel slides */
  background-color: #060607;
}

/* Controls: target Bootstrap 5 prev/next controls */
.carousel-control-prev,
.carousel-control-next {
  width: 10%;
}


.carousel-caption {
  z-index: 10;
  text-align: left;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 1200px;
  padding: 20px;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 60px;
  align-items: center;
}

/* Make caption background slightly translucent for readability over busy images (no HTML change required) */
.carousel-caption::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, rgba(0,0,0,0.28), rgba(0,0,0,0.5));
  z-index: 6;
  border-radius: 6px;
}

/* Ensure direct children render above the background pseudo-element */
.carousel-caption > * {
  position: relative;
  z-index: 10;
}

/* Ensure controls and indicators are above the foreground overlay */
.carousel-control-prev,
.carousel-control-next {
  z-index: 40;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: auto;
}
.carousel-indicators {
  z-index: 40;
  pointer-events: auto;
}

/* Modern slide wrapper: move inline slide backgrounds into CSS for maintainability */
.carousel-item > .first-slide,
.carousel-item > .second-slide,
.carousel-item > .third-slide {
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
  height: 520px;
  width: 100%;
  position: relative;
}

.carousel-item > .first-slide { background-image: url('../images/infrastructure/layered-waves-haikei_1.svg'); }
.carousel-item > .second-slide { background-image: url('../images/infrastructure/layered-waves-haikei_1.svg'); }
.carousel-item > .third-slide { background-image: url('../images/infrastructure/layered-waves-haikei_1.svg'); }

/* Foreground overlay positioning (keeps captions centered) */
.carousel-item .foreground {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 10;
  display: flex;
  align-items: center;
  pointer-events: none; /* allow clicks to pass through to controls */
}

/* If the foreground contains interactive elements (links/buttons), enable pointer events for them */
.carousel-item .foreground a,
.carousel-item .foreground button,
.carousel-item .foreground input,
.carousel-item .foreground [role="button"] {
  pointer-events: auto;
}
/* Featurettes
------------------------- */

.featurette-divider {
  margin: 40px 0; /* Space out the Bootstrap <hr> more */
}

/* Thin out the marketing headings */
.featurette-heading {
  font-weight: 300;
  line-height: 1;
  letter-spacing: -1px;
}


/* RESPONSIVE CSS
-------------------------------------------------- */

@media (min-width: 768px) {
  /* Navbar positioning foo */
  .navbar-wrapper {
    margin-top: 20px;
  }
  .navbar-wrapper .container {
    padding-right: 15px;
    padding-left: 15px;
  }
  .navbar-wrapper .navbar {
    padding-right: 0;
    padding-left: 0;
  }

  /* The navbar becomes detached from the top, so we round the corners */
  .navbar-wrapper .navbar {
    border-radius: 4px;
  }

  /* Bump up size of carousel content */
  .carousel-caption p {
    margin-bottom: 20px;
    font-size: 14px;
    font-weight: 200;
    line-height: 1.4;
    margin-bottom: 10px;
  }

  .featurette-heading {
    font-size: 50px;
  }
}

@media (min-width: 992px) {
  .featurette-heading {
    margin-top: 120px;
  }
}

/* MOBILE CAROUSEL STYLES
-------------------------------------------------- */

/* Mobile styles for carousel - stack content vertically */
@media (max-width: 767px) {
  /* Ensure carousel and slides collapse to content height on tiny screens */
  .carousel, .carousel-item, .carousel-item > .first-slide,
  .carousel-item > .second-slide, .carousel-item > .third-slide {
    height: auto !important;
    min-height: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Remove any pseudo-element background clipping that might overlap text on narrow screens */
  .carousel-caption::before { display: none; }

  /* Ensure foreground is non-overlapping and flows with content */
  .carousel-item .foreground { position: relative !important; display: block !important; box-sizing: border-box !important; }

  /* Place image above text for better UX on mobile (image first, then text) */
  .carousel-item .foreground .row { flex-direction: column-reverse !important; }

  /* Larger tap targets for controls on mobile */
  .carousel-control-prev, .carousel-control-next { width: 18% !important; }
  .carousel-control-prev-icon, .carousel-control-next-icon { width: 44px; height: 44px; }
  /* Additional overrides to match legacy mobile stacking (Bootstrap 5 differences) */
  .carousel .container {
    padding-left: 12px !important;
    padding-right: 12px !important;
  }

  /* Force rows inside carousel to be vertical stacks on mobile */
  .carousel .row {
    display: flex !important;
    flex-direction: column !important;
    gap: 12px !important;
    align-items: center !important;
  }

  /* Make columns full width in carousel on mobile */
  .carousel .col-md-7, .carousel .col-md-5, .carousel .col-sm-8, .carousel .col-sm-4 {
    width: 100% !important;
    flex: 0 0 100% !important;
    max-width: 100% !important;
  }

  /* Remove large background images on mobile to avoid clipping/overlap and improve contrast */
  .carousel-item > .first-slide,
  .carousel-item > .second-slide,
  .carousel-item > .third-slide {
    background-image: none !important;
    background-color: #042433 !important;
    background-size: cover !important;
    background-position: center top !important;
    padding-top: 8px !important;
  }

  /* Ensure the foreground does not overlap due to absolute positioning */
  .carousel-item .foreground {
    position: relative !important;
    padding-top: 6px !important;
    padding-bottom: 6px !important;
  }

  /* Keep the thumbnail strip off-screen on tiny devices, or allow horizontal scroll */
  .carousel-thumbs { display: none !important; }

  /* Ensure rules target Bootstrap 5 markup (.carousel-item) as well as legacy selectors */
  .carousel-item {
    height: auto !important;
    min-height: 320px !important;
    padding: 12px 0 !important;
  }

  /* Allow slide wrapper backgrounds to shrink on mobile */
  .carousel-item > .first-slide,
  .carousel-item > .second-slide,
  .carousel-item > .third-slide {
    height: auto !important;
    min-height: 280px !important;
    background-position: center top !important;
  }

  /* Make the foreground act as the stacking container (no absolute positioning on mobile) */
  .carousel-item .foreground {
    position: relative !important;
    display: block !important;
    inset: auto !important;
    width: 100% !important;
    height: auto !important;
    padding: 8px 12px !important;
    align-items: stretch !important;
    pointer-events: auto !important;
  }

  /* Stack the content columns vertically and center them */
  .carousel-item .foreground .row {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    gap: 12px !important;
  }

  .carousel-item .foreground .col-md-7,
  .carousel-item .foreground .col-md-5,
  .carousel-item .foreground .col-sm-8,
  .carousel-item .foreground .col-sm-4 {
    width: 100% !important;
    max-width: 720px !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  /* Scale images inside the slide properly */
  .carousel-item .foreground img,
  .carousel-item .foreground .img-fluid {
    max-width: 92% !important;
    width: auto !important;
    height: auto !important;
    margin: 0 auto !important;
  }

  /* Ensure headings inside the actual markup inherit our improved styles */
  .carousel-item .foreground h2 { font-size: 22px !important; font-weight: 800 !important; margin-bottom: 6px !important; }
  .carousel-item .foreground h3 { font-size: 16px !important; font-weight: 700 !important; margin-bottom: 8px !important; }

  /* Keep controls usable on mobile */
  .carousel-control-prev, .carousel-control-next { width: 12% !important; }

  /* Slightly increase spacing under mobile carousel */
  .carousel { margin-bottom: 24px !important; }

  /* Reduce carousel height on mobile */
  .carousel {
    height: auto;
    min-height: 400px;
  }
  
  .carousel .item {
    height: auto;
    min-height: 400px;
    padding: 20px 0;
  }
  
  /* Stack carousel content vertically on mobile */
  .carousel-caption {
    display: flex !important;
    flex-direction: column !important;
    grid-template-columns: none !important;
    gap: 20px !important;
    position: static !important;
    transform: none !important;
    width: 100% !important;
    max-width: none !important;
    padding: 12px 12px !important;
    text-align: center !important;
  }
  
  /* Text content on mobile */
  .carousel-caption .carousel-text {
    grid-column: 1;
    max-width: 500px;
    margin: 0;
  }

  .carousel-caption .carousel-image-container {
    grid-column: auto !important;
    justify-self: center !important;
    margin: 0 auto 20px auto !important;
    transform: none !important;
    order: 1;
    text-align: center;
  }
  
  /* Responsive images on mobile */
  .carousel-caption .carousel-image img {
    max-width: 280px !important;
    width: 90% !important;
    height: auto !important;
  }
  
  /* Mobile typography adjustments */
  .carousel-caption h2 {
    font-size: 22px !important;
    margin-bottom: 8px !important;
    text-shadow: 0 2px 8px rgba(0,0,0,0.6);
    letter-spacing: -0.5px;
  }
  
  .carousel-caption h3 {
    font-size: 18px !important;
    margin-bottom: 15px !important;
  }
  
  .carousel-caption p {
    font-size: 14px !important;
    line-height: 1.4 !important;
    margin-bottom: 12px !important;
  }
  
  /* Adjust carousel controls for mobile (Bootstrap 5 selectors) */
  .carousel-control-prev,
  .carousel-control-next {
    width: 8% !important;
  }

  /* Control icon sizing */
  .carousel-control-prev-icon,
  .carousel-control-next-icon {
    font-size: 20px !important;
  }
  
  /* Hide carousel indicators on very small screens */
  .carousel-indicators {
    bottom: 10px !important;
  }
  
  /* Bootstrap 5 uses buttons inside .carousel-indicators */
  .carousel-indicators [data-bs-target],
  .carousel-indicators button {
    width: 8px !important;
    height: 8px !important;
    margin: 0 3px !important;
    border-radius: 50% !important;
  }

  /* Force images and inner container to behave like a stacked block on mobile */
  .carousel .carousel-inner, .carousel .carousel-item {
    display: block !important;
    width: 100% !important;
  }

  /* Make slide images fill the width and keep aspect ratio */
  .carousel .carousel-inner img, .carousel .carousel-item img {
    display: block !important;
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
    object-fit: cover !important;
  }

  /* Place caption below the image and make it clearly readable */
  .carousel-caption {
    position: relative !important;
    transform: none !important;
    top: auto !important;
    left: auto !important;
    margin-top: 8px !important;
    width: calc(100% - 24px) !important;
    padding: 12px !important;
    background: rgba(0,0,0,0.45) !important;
    border-radius: 8px !important;
    box-shadow: 0 6px 20px rgba(0,0,0,0.45) !important;
    text-align: left !important;
  }

  .carousel-caption h2, .carousel-caption h3 { text-align: left !important; }

  /* Make controls larger and ensure they sit vertically centered */
  .carousel-control-prev, .carousel-control-next {
    width: 56px !important;
    height: 56px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
  }
  .carousel-control-prev-icon, .carousel-control-next-icon {
    width: 32px !important;
    height: 32px !important;
    background-size: 32px 32px !important;
  }
}

/* Hide thumbnail strip on small screens to save vertical space */
@media (max-width: 767px) {
  .carousel-thumbs { display: none !important; }
}

/* Strengthen desktop carousel headings to match featurette prominence */
#myCarousel h2 {
  font-size: 3rem;
  line-height: 1.02;
  font-weight: 800;
  color: #ffffff;
  text-shadow: 0 6px 18px rgba(0,0,0,0.6);
}
#myCarousel h3 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #eaf6ff;
  text-shadow: 0 4px 12px rgba(0,0,0,0.45);
}

/* Slight translucent pill behind small headings on large screens to match featurette look */
.carousel-caption .small-pill {
  display: inline-block;
  background: rgba(255,255,255,0.06);
  color: rgba(255,255,255,0.95);
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 600;
  margin-bottom: 10px;
}

/* Extra small mobile devices */
@media (max-width: 480px) {
  .carousel {
    min-height: 350px;
  }
  
  .carousel .item {
    min-height: 350px;
  }
  
  .carousel-caption {
    padding: 15px 10px !important;
  }
  
  .carousel-caption h2 {
    font-size: 20px !important;
  }
  
  .carousel-caption h3 {
    font-size: 16px !important;
  }
  
  .carousel-caption p {
    font-size: 13px !important;
  }
  
  .carousel-caption .carousel-image img {
    max-width: 240px !important;
  }
}

/* Tablet styles */
@media (min-width: 768px) and (max-width: 991px) {
  .carousel-caption {
    gap: 40px !important;
    padding: 15px !important;
  }
  
  .carousel-caption .carousel-image-container {
    transform: translateX(20px) !important;
  }
  
  .carousel-caption .carousel-image img {
    max-width: 350px !important;
  }
}

/* High-specificity mobile overrides for #myCarousel to restore stacked mobile behaviour */
@media (max-width: 767px) {
  /* Make the carousel and slides flow normally */
  #myCarousel, #myCarousel .carousel-inner, #myCarousel .carousel-item {
    display: block !important;
    position: relative !important;
    width: 100% !important;
    height: auto !important;
    min-height: 0 !important;
  }

  /* Images fill width and keep aspect ratio */
  #myCarousel img {
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
    object-fit: cover !important;
    display: block !important;
    margin: 0 auto !important;
  }

  /* Ensure foreground and rows stack and do not overlap */
  #myCarousel .foreground {
    position: relative !important;
    inset: auto !important;
    width: 100% !important;
    height: auto !important;
    display: block !important;
    padding: 8px 12px !important;
  }
  #myCarousel .foreground .row { flex-direction: column !important; }

  /* Caption below the image, readable background */
  #myCarousel .carousel-caption {
    position: relative !important;
    transform: none !important;
    top: auto !important;
    left: auto !important;
    width: calc(100% - 24px) !important;
    margin: 8px 12px !important;
    padding: 12px !important;
    background: rgba(3,18,24,0.72) !important;
    border-radius: 8px !important;
    box-shadow: 0 8px 30px rgba(0,0,0,0.6) !important;
    text-align: left !important;
  }

  /* Make headings prominent but not oversized on very small screens */
  #myCarousel .carousel-caption h2 { font-size: 20px !important; line-height: 1.1 !important; font-weight: 800 !important; }
  #myCarousel .carousel-caption h3 { font-size: 15px !important; font-weight: 700 !important; color: #e6f6ff !important; }

  /* Controls: larger tap targets and keep them visible */
  #myCarousel .carousel-control-prev, #myCarousel .carousel-control-next {
    width: 56px !important;
    height: 56px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
  }
  #myCarousel .carousel-control-prev-icon, #myCarousel .carousel-control-next-icon { width: 28px !important; height: 28px !important; }

  /* Hide thumbnails on phones */
  #myCarousel + .carousel-thumbs, #myCarousel .carousel-thumbs { display: none !important; }
}

/* v2.0 thumbnail active state and spacing tweaks */
.carousel-thumbs .thumb.active img {
  outline: 3px solid rgba(0,127,255,0.9);
  transform: scale(1.03);
}
.carousel-thumbs .thumb img {
  transition: transform 160ms ease, outline 160ms ease;
}

/* Add bottom spacing under carousel to avoid overlap with following content (featurettes) */
.carousel { margin-bottom: 40px; }
@media (min-width: 992px) {
  .carousel { margin-bottom: 80px; }
}

/* Featurette column headings: target the exact markup used (col-sm-8 h2) */
.col-sm-8 h2, .col-sm-8 .text-3xl {
  font-size: 2rem; /* ~32px */
  font-weight: 700;
  color: #ffffff;
}

@media (min-width: 768px) {
  /* Ensure carousel headings are prominent on tablet+ */
  #myCarousel h2 { font-size: 3.25rem; }
  #myCarousel h3 { font-size: 1.5rem; }
  .col-sm-8 h2 { font-size: 2.5rem; }
}